<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PromptPilot â€” Next Problem?</title>
<link rel="stylesheet" href="styles.css"/>
</head>
<body>
<div id="app">

  <!-- â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <aside id="sidebar">
    <div id="sidebar-header">
      <div class="logo-row">
        <div class="logo-icon">ğŸ§­</div>
        <div>
          <div class="logo-text">PromptPilot</div>
          <div class="logo-sub">by Next Problem?</div>
        </div>
      </div>
    </div>

    <nav id="nav">
      <div class="nav-item active" data-panel="prompts">
        <span class="nav-icon">ğŸ’¡</span> Prompts
      </div>
      <div class="nav-item" data-panel="profiles">
        <span class="nav-icon">ğŸ‘¤</span> Profiles
      </div>
      <div class="nav-item" data-panel="admin">
        <span class="nav-icon">ğŸ”</span> Admin
      </div>
      <div class="nav-item" data-panel="consent">
        <span class="nav-icon">ğŸ¤</span> Consent
      </div>
      <div class="nav-item" data-panel="logs">
        <span class="nav-icon">ğŸ“‹</span> Audit Log
      </div>
      <div class="nav-item" data-panel="settings">
        <span class="nav-icon">âš™ï¸</span> Settings
      </div>
    </nav>

    <div id="sidebar-footer">
      <span class="version-badge">v1.1.0</span>
    </div>
  </aside>

  <!-- â”€â”€ Main â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="main">
    <div id="topbar">
      <h2 id="topbar-title">ğŸ’¡ Prompt Library</h2>
      <div class="topbar-right">
        <div class="status-dot" title="App running"></div>
      </div>
    </div>

    <div id="content">

      <!-- â”€â”€ PROMPTS panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="panel active" id="panel-prompts">
        <div class="card">
          <div class="card-title"><span>ğŸ’¡</span> Browse Prompt Templates</div>
          <div class="prompt-cats" id="cat-pills"></div>
          <div class="prompt-list" id="prompt-list"></div>
        </div>
        <div class="card" id="prompt-detail-card" style="display:none">
          <div class="card-title"><span>ğŸ“</span> Prompt Detail</div>
          <div class="form-row" style="margin-bottom:12px">
            <div>
              <div class="field">
                <label>Title</label>
                <input id="prompt-detail-title" readonly/>
              </div>
            </div>
            <div>
              <div class="field">
                <label>Style</label>
                <input id="prompt-detail-style" readonly/>
              </div>
            </div>
          </div>
          <div class="field">
            <label>Prompt Body</label>
            <textarea id="prompt-detail-body" rows="6" readonly></textarea>
          </div>
          <div style="display:flex;gap:10px;margin-top:12px">
            <button class="btn-primary" id="copy-prompt-btn">ğŸ“‹ Copy Prompt</button>
          </div>
        </div>
      </div>

      <!-- â”€â”€ PROFILES panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="panel" id="panel-profiles">
        <div class="card">
          <div class="card-title"><span>âœ¨</span> Create New Profile</div>
          <div class="form-row-3">
            <div class="field"><label>User ID</label><input id="uid" placeholder="e.g. alice"/></div>
            <div class="field"><label>Display Name</label><input id="name" placeholder="Alice Smith"/></div>
            <div class="field"><label>Passphrase</label><input id="pw" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"/></div>
          </div>
          <div style="margin-top:14px">
            <button class="btn-primary" id="create_profile">âœ¨ Create Profile</button>
          </div>
          <div id="create_out" class="output-box" style="margin-top:14px;display:none"></div>
        </div>

        <div class="card">
          <div class="card-title"><span>ğŸ‘¥</span> Existing Profiles</div>
          <div class="profile-grid" id="profile-grid">
            <div style="color:var(--text-muted);font-size:13px">No profiles yet. Create one above!</div>
          </div>
          <div style="margin-top:14px">
            <button id="refresh-profiles" class="btn-sm">ğŸ”„ Refresh</button>
          </div>
        </div>
      </div>

      <!-- â”€â”€ ADMIN panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="panel" id="panel-admin">
        <div class="card">
          <div class="card-title"><span>ğŸ”</span> Admin Authentication</div>
          <div id="admin-status-banner" class="admin-locked">
            ğŸ”’ &nbsp;Admin mode is <strong>locked</strong>. Sign a nonce with your admin private key to unlock.
          </div>
          <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
            <button id="admin_nonce">ğŸ² Get Nonce</button>
            <button id="admin_status">ğŸ” Check Status</button>
          </div>
          <div class="field" style="margin-top:14px">
            <label>Nonce (copy this â†’ sign with your admin Ed25519 key)</label>
            <div class="output-box" id="nonce-display">
              <span class="output-empty">Click "Get Nonce" to generateâ€¦</span>
              <button class="output-copy" id="copy-nonce-btn" style="display:none">Copy</button>
            </div>
          </div>
          <div class="unlock-row" style="margin-top:12px">
            <div class="field">
              <label>Base64 Signature of Nonce</label>
              <input id="sig" placeholder="Paste base64(Ed25519 signature)â€¦"/>
            </div>
            <button class="btn-primary" id="admin_unlock" style="height:38px">ğŸ”“ Unlock</button>
          </div>
          <div id="admin_out" class="output-box" style="margin-top:12px;display:none"></div>
        </div>
      </div>

      <!-- â”€â”€ CONSENT panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="panel" id="panel-consent">
        <div class="card">
          <div class="card-title"><span>ğŸ¤</span> Request User Consent</div>
          <div class="form-row">
            <div class="field"><label>User ID</label><input id="c_user" placeholder="user id"/></div>
            <div style="display:flex;align-items:flex-end">
              <button class="btn-primary" id="req_consent">ğŸ“© Request Consent</button>
            </div>
          </div>
          <div class="output-box" id="consent_out" style="margin-top:14px">
            <span class="output-empty">Click "Request Consent" to startâ€¦</span>
          </div>
        </div>

        <div class="card">
          <div class="card-title"><span>âœ…</span> Verify &amp; Authorize</div>
          <div class="form-row">
            <div class="field"><label>Consent Nonce</label><input id="consent_nonce" placeholder="from request above"/></div>
            <div class="field"><label>User Signature (base64)</label><input id="user_sig" placeholder="base64(sig)"/></div>
          </div>
          <div class="field" style="margin-top:12px">
            <label>User Public Key (base64)</label>
            <input id="user_pub" placeholder="base64(ed25519 pubkey)"/>
          </div>
          <div style="margin-top:14px">
            <button class="btn-success" id="verify_consent">âœ… Verify &amp; Authorize</button>
          </div>
          <div class="output-box" id="verify_out" style="margin-top:12px;display:none"></div>
        </div>
      </div>

      <!-- â”€â”€ LOGS panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="panel" id="panel-logs">
        <div class="card">
          <div class="card-title"><span>â•</span> Append Event</div>
          <div style="display:flex;gap:10px">
            <input id="log_event" placeholder="Describe the eventâ€¦" style="flex:1"/>
            <button class="btn-primary" id="append_log">â• Append</button>
            <button id="log_head">ğŸ”— Head Hash</button>
          </div>
          <div class="output-box" id="log_out" style="margin-top:12px;display:none"></div>
        </div>

        <div class="card">
          <div class="card-title"><span>ğŸ“‹</span> Recent Log Entries</div>
          <div class="table-wrap">
            <table class="log-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Timestamp</th>
                  <th>Event</th>
                  <th>Prev Hash</th>
                  <th>Curr Hash</th>
                </tr>
              </thead>
              <tbody id="log-table-body">
                <tr><td colspan="5" style="color:var(--text-muted);text-align:center;padding:20px">
                  No log entries yet
                </td></tr>
              </tbody>
            </table>
          </div>
          <div style="margin-top:12px">
            <button id="refresh-logs" class="btn-sm">ğŸ”„ Refresh Logs</button>
          </div>
        </div>
      </div>

      <!-- â”€â”€ SETTINGS panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="panel" id="panel-settings">
        <div class="card">
          <div class="card-title"><span>âš™ï¸</span> Answer Style</div>
          <p style="color:var(--text-muted);font-size:13px;margin-bottom:14px">
            Choose the default style used to format interview answers.
          </p>
          <div class="form-row" style="max-width:420px">
            <div class="field">
              <label>Style</label>
              <select id="style">
                <option value="STAR">STAR â€” Situation, Task, Action, Result</option>
                <option value="QUANT">Quant Bullets â€” metric-focused</option>
                <option value="HYBRID">Hybrid â€” STAR + quantified bullets</option>
              </select>
            </div>
            <div style="display:flex;align-items:flex-end">
              <button class="btn-primary" id="save_style">ğŸ’¾ Save Style</button>
            </div>
          </div>
          <div id="style_out" class="output-box" style="margin-top:14px;display:none"></div>
        </div>

        <div class="card">
          <div class="card-title"><span>ğŸ”‘</span> Unlock Profile</div>
          <p style="color:var(--text-muted);font-size:13px;margin-bottom:14px">
            Verify passphrase to unlock a profile's private signing key.
          </p>
          <div class="form-row">
            <div class="field"><label>User ID</label><input id="unlock-uid" placeholder="user id"/></div>
            <div class="field"><label>Passphrase</label><input id="unlock-pw" type="password" placeholder="passphrase"/></div>
          </div>
          <div style="margin-top:14px">
            <button class="btn-primary" id="unlock-btn">ğŸ”‘ Unlock Profile</button>
          </div>
          <div id="unlock_out" class="output-box" style="margin-top:12px;display:none"></div>
        </div>

        <div class="card">
          <div class="card-title"><span>â„¹ï¸</span> About</div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;font-size:13px">
            <div><span style="color:var(--text-muted)">App</span><br/><strong>PromptPilot</strong></div>
            <div><span style="color:var(--text-muted)">Version</span><br/><strong>1.1.0</strong></div>
            <div><span style="color:var(--text-muted)">By</span><br/><strong>Next Problem?</strong></div>
            <div><span style="color:var(--text-muted)">Backend</span><br/><strong>Tauri v2 + Rust</strong></div>
            <div><span style="color:var(--text-muted)">Crypto</span><br/><strong>Ed25519 + XChaCha20-Poly1305</strong></div>
            <div><span style="color:var(--text-muted)">Storage</span><br/><strong>SQLite (local)</strong></div>
          </div>
          <div style="margin-top:16px">
            <a href="assets/brand.html" target="_blank"
               style="color:var(--accent);font-size:13px;text-decoration:none">
              ğŸ¬ View installer animation â†’
            </a>
          </div>
        </div>
      </div>

    </div><!-- #content -->
  </div><!-- #main -->
</div><!-- #app -->

<!-- Toast container -->
<div id="toast-container"></div>

<script type="module" src="main.js"></script>
</body>
</html>
